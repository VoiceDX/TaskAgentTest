# AIエージェント構成概要

## クラス・関数解説
- `Tool`クラス（`src/agent.py`）
  - ツールの名前・説明・スクリプトパスを保持するデータクラスです。
- `ToolRegistry`クラス
  - `__init__`でJSONファイルのパスを受け取り、`load_tools`でツール定義を読み込みます。
  - JSON配列の各要素から`Tool`インスタンスを生成し、辞書に登録します。
- `ReactAgent`クラス
  - `__init__`でツール群とLLM設定（`OpenAIWrapper`）を初期化します。
  - `plan_action`がReActステップの計画フェーズを担い、目的・履歴・直近の観測をLLMへ渡して次の行動プランを取得します。
  - `execute_tool`が計画で指定されたツールをPythonスクリプトとしてサブプロセス実行し、結果を観測として返します。
  - `run`が目的達成のメインループで、計画→実行→評価を繰り返しながら終了条件（成功または最大試行回数）まで処理を進めます。
- `main`関数（`src/main.py`）
  - ツール定義ファイルを読み込み、`ReactAgent`を生成します。
  - ユーザから入力された目的を`run`に渡し、最終応答をコンソール出力します。

## 処理の流れ
1. `main`関数でツール定義JSONを読み込み、`ToolRegistry`と`ReactAgent`を初期化します。
2. ユーザが入力した目的文が`ReactAgent.run`へ渡され、履歴と観測を初期化した上でループ処理が始まります。
3. 各ループで`plan_action`が呼び出され、LLMにより次の`action`と`action_input`が計画されます。
4. `execute_tool`が計画されたツールをPythonスクリプトとして実行し、標準出力・標準エラーを観測値として取得します。
5. 観測結果を履歴に追加した上で、成功判定（`is_final`が真）または最大試行回数に到達するまで3〜4を繰り返します。
6. 成功または失敗メッセージを`run`が返し、`main`関数がコンソールに表示します。
